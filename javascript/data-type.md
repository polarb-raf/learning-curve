# 데이터 타입

`코어자바스크립트(위키북스)`의 1장 `데이터 타입` 파트를 읽고 정리한 문서.

<br>


## 데이터 타입의 종류
데이터 타입은 기본형(primitive type)과 참조형(reference type)으로 나뉜다.
- 기본형: Number, String, Boolean, null, undefined, Symbol 
- 참조형: Object, Array, Function, Date, RegExp, Map, WeakMap, Set, WeakSet 등

> 기본형은 값이 담긴 주솟값을 바로 복제하고, 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복제한다.

- 데이터 타입에 관한 배경지식
    > 메모리에 저장된 데이터는 **메모리 주솟값**을 통해 서로 구분하고 연결할 수 있다  
    > 식별자와 변수를 혼동하지 말자. 식별자는 변수명, 변수는 데이터 측면

<br>

## 변수 선언과 데이터 할당

- 변수 선언
    ```javascript
    var a;
    ```
  컴퓨터는 비어있닌 메모리 셀을 확보하고 그 공간의 이름을 a라고 지정한다.

- 데이터 할당
    ```javascript
    var a;
    a= 'abc';
    ```
    새로운 메모리 셀에 'abc'라는 문자열을 저장하고, 해당 셀의 메모리 주솟값을 앞의 할당 과정에서 a 변수명을 할당한 메모리 셀에 저장한다.

<br>

## 기본형 데이터와 참조형 데이터

### 불변값

- 불변값, 불변성이라고 하는 것은 '상수'를 말하는 것이 아니다.
- 기본형 데이터가 할당되어 있던 변수에 새로운 기본형 데이터를 다시 할당하게 되면, 기본형 데이터를 새로 만들어서 새로운 주소값을 가지게 된다.
    ```javascript
    var a = 'abc'
    a = a + 'def' // 'abc'가 담겨있는 메모리에 새로운 문자열을 할당하지 않고, abcdef라는 값을 새로운 메모리에 담고 주소 참조를 변경
    ```
- 문자열, 숫자 등 기본형 데이터의 변경은 `새로 만드는 동작`을 통해서만 이루어 진다. 그렇기 때문에 `불변`
- 물론 GC 당하면 값이 없어진다

### 가변값
- 참조형 데이터는 가변값인 경우가 많지만 설정에 따라 변경 불가능한 경우도 있다.
- 객체를 할당하는 경우
    ```javascript
    var obj1 = {
      a: 1,
      b: 'bbb'
    };
    ```
    obj1은 프로퍼티 a, b가 저장되어있는 메모리 주소 그룹을 기억하고, `1, bbb`같은 값을 저장한 메모리 셀 값을 프로퍼티 a, b가 기억하게 된다.  
    1, 'bbb'같은 값은 불변값이지만, 변수 자체에는 다른 값을 얼마든지 대입할 수 있다.
     
### 변수 복사
```javascript
var a = 10;
var b = a;
var obj1 = { c: 10, d: 'ddd' };
var obj2 = obj1;

b = 15;
obj2.c = 20;
```
- 기본형 데이터를 복사한 경우는 15라는 새로운 값을 생성하여 b가 참조하는 메모리 주소값이 변한 것이기 때문에 변수 a에는 아무런 영향이 없다.
- 하지만 obj1과 2는 프로퍼티 c가 저장되어있는 메모리 주소를 공유하고 있고, c의 값을 변경한다고 하여도 프로퍼티 c 자체를 새로 생성하는 것이 아니기 때문에, 두 객체 모두 c의 값이 변경된다.
- 그러나 물론 프로퍼티 변경이 아닌, obj2에 새로운 객체 리터럴을 선언하게 되면 서로 다른 메모리 주소를 가지기 때문에 기존 객체의 값에 간섭이 일어나지 않게 된다.
    ```javascript
    var obj1 = { c: 10, d: 'ddd' };
    var obj2 = obj1;
    obj2 = { c: 20, d: 'ddd' };
    obj1.c // 10
    obj2.c // 20
    ```

<br>

## 불변객체
불변 객체는 javascript 개발에서 아주 중요한 개념이다. 객체 역시 프로퍼티를 변경할 필요가 있을 때마다 새로운 객체를 만들어서 재할당한다면 불변성을 확보할 수 있다.  
> immutable, immer 등, 라이브러리의 도움을 받는 것도 편하다.

#### 얕은 복사와 깊은 복사
- 반복문을 이용하여 객체의 프로퍼티를 복사하는 함수를 만들어서 사용할 수 있다.
- recursive하게 만들어서 프로퍼티가 참조형 데이터를 가지고 있는 경우에도 `깊은 복사`가 가능하게 만들 수 있다.
- getter, setter는 별도의 처리가 필요.
- `JSON.stringify(), parse()`는 잘 동작하지만 **`느린`**함수로 알고 있음.

<br>

## undefined와 null
> 값이 `없음`을 나타내고 싶은 거라면 null을 쓰자  

- empty와 undefined는 다르다.
- array에서 선언되지 않고 건너 뛴 곳은 empty가 됨. array도 결국은 인덱스를 프로퍼티로 갖는 객체라고 생각하면 쉽다.
- **typeof null**은 **`object`**다. ?! 아주 오래된 버그라 이제는 수정조차 할 수 없게 된 상황인 듯 하다.(You don't know JS의 저자 카일 심슨의 의견)




